
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../Contribuer/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.5">
    
    
      
        <title>Coder avec Pixel-Wrangle - Pixel-Wrangle Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Fira";--md-code-font:"Fira Code"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#coder-avec-pixel-wrangle" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pixel-Wrangle Docs" class="md-header__button md-logo" aria-label="Pixel-Wrangle Docs" data-md-component="logo">
      
  <img src="../../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pixel-Wrangle Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Coder avec Pixel-Wrangle
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_3" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_3">
          
            <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="/en/" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
              
                <li class="md-select__item">
                  <a href="/fr/" hreflang="fr" class="md-select__link">
                    Français
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pixel-Wrangle Docs" class="md-nav__button md-logo" aria-label="Pixel-Wrangle Docs" data-md-component="logo">
      
  <img src="../../assets/logo.svg" alt="logo">

    </a>
    Pixel-Wrangle Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Pixel Wrangle Documentation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" tabindex="0" aria-expanded="false">
          En
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="En" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          En
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../en/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../en/Coding%20with%20Pixel%20Wrangle/" class="md-nav__link">
        Coding with Pixel-Wrangle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../en/Contribute/" class="md-nav__link">
        Contribute
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../en/Functions/" class="md-nav__link">
        Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../en/GLSL%20Language/" class="md-nav__link">
        GLSL Language
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../en/Install/" class="md-nav__link">
        Install
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../en/Keyboard%20Shortcuts/" class="md-nav__link">
        Keyboard Shortcuts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../en/Macros/" class="md-nav__link">
        Macros
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../en/Parameters/" class="md-nav__link">
        Parameters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../en/Presets/" class="md-nav__link">
        Presets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../en/Quick%20Start/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../en/Visual%20Studio%20Code/" class="md-nav__link">
        Visual Studio Code
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4" tabindex="0" aria-expanded="true">
          Fr
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Fr" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Fr
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Coder avec Pixel-Wrangle
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Coder avec Pixel-Wrangle
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vue-densemble-de-lediteur-de-pixel-wrangle" class="md-nav__link">
    Vue d'ensemble de l'éditeur de Pixel Wrangle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordre-dexecution" class="md-nav__link">
    Ordre d'exécution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attention" class="md-nav__link">
    Attention
  </a>
  
    <nav class="md-nav" aria-label="Attention">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mais" class="md-nav__link">
    MAIS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-particularites-de-longlet-io" class="md-nav__link">
    Les particularités de l'onglet IO
  </a>
  
    <nav class="md-nav" aria-label="Les particularités de l'onglet IO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#panneau-des-inputs-variables-uniform" class="md-nav__link">
    Panneau des Inputs (variables uniform)
  </a>
  
    <nav class="md-nav" aria-label="Panneau des Inputs (variables uniform)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specificites-de-syntaxe" class="md-nav__link">
    Spécificités de syntaxe
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cas-specifiques-headers" class="md-nav__link">
    Cas spécifiques (Headers)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#correspondance-des-types-glsl-style-de-parametres-td" class="md-nav__link">
    Correspondance des Types GLSL / Style de paramètres TD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-proprietes-modifiables" class="md-nav__link">
    Les propriétés modifiables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples" class="md-nav__link">
    Exemples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#panneau-des-outputs-buffers" class="md-nav__link">
    Panneau des Outputs (Buffers)
  </a>
  
    <nav class="md-nav" aria-label="Panneau des Outputs (Buffers)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generalites-au-sein-de-glsl-top" class="md-nav__link">
    Généralités au sein de GLSL TOP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-dans-un-glsl-top" class="md-nav__link">
    Exemples dans un GLSL TOP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-des-buffers-avec-pixel-wrangle" class="md-nav__link">
    Gestion des buffers avec Pixel Wrangle
  </a>
  
    <nav class="md-nav" aria-label="Gestion des buffers avec Pixel Wrangle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#en-mode-vertexpixel" class="md-nav__link">
    En mode Vertex/Pixel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#en-mode-compute" class="md-nav__link">
    En mode Compute
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Contribuer/" class="md-nav__link">
        Contribuer au projet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../D%C3%A9marrer%20rapidement%20avec%20Pixel%20Wrangle/" class="md-nav__link">
        Démarrer rapidement
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Fonctions/" class="md-nav__link">
        Fonctions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../GLSL/" class="md-nav__link">
        Le langage GLSL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Macros/" class="md-nav__link">
        Les Macros
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Param%C3%A8tres/" class="md-nav__link">
        Paramètres
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Presets/" class="md-nav__link">
        Presets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Raccourcis%20claviers/" class="md-nav__link">
        Les raccourcis clavier
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../VSCode/" class="md-nav__link">
        Visual Studio Code
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vue-densemble-de-lediteur-de-pixel-wrangle" class="md-nav__link">
    Vue d'ensemble de l'éditeur de Pixel Wrangle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordre-dexecution" class="md-nav__link">
    Ordre d'exécution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attention" class="md-nav__link">
    Attention
  </a>
  
    <nav class="md-nav" aria-label="Attention">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mais" class="md-nav__link">
    MAIS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#les-particularites-de-longlet-io" class="md-nav__link">
    Les particularités de l'onglet IO
  </a>
  
    <nav class="md-nav" aria-label="Les particularités de l'onglet IO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#panneau-des-inputs-variables-uniform" class="md-nav__link">
    Panneau des Inputs (variables uniform)
  </a>
  
    <nav class="md-nav" aria-label="Panneau des Inputs (variables uniform)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specificites-de-syntaxe" class="md-nav__link">
    Spécificités de syntaxe
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cas-specifiques-headers" class="md-nav__link">
    Cas spécifiques (Headers)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#correspondance-des-types-glsl-style-de-parametres-td" class="md-nav__link">
    Correspondance des Types GLSL / Style de paramètres TD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-proprietes-modifiables" class="md-nav__link">
    Les propriétés modifiables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples" class="md-nav__link">
    Exemples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#panneau-des-outputs-buffers" class="md-nav__link">
    Panneau des Outputs (Buffers)
  </a>
  
    <nav class="md-nav" aria-label="Panneau des Outputs (Buffers)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generalites-au-sein-de-glsl-top" class="md-nav__link">
    Généralités au sein de GLSL TOP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemples-dans-un-glsl-top" class="md-nav__link">
    Exemples dans un GLSL TOP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-des-buffers-avec-pixel-wrangle" class="md-nav__link">
    Gestion des buffers avec Pixel Wrangle
  </a>
  
    <nav class="md-nav" aria-label="Gestion des buffers avec Pixel Wrangle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#en-mode-vertexpixel" class="md-nav__link">
    En mode Vertex/Pixel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#en-mode-compute" class="md-nav__link">
    En mode Compute
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="coder-avec-pixel-wrangle">Coder avec Pixel-Wrangle</h1>
<h2 id="introduction">Introduction</h2>
<p>Pixel Wrangle propose un environnement de développement de pixel shaders impliquant un <a href="https://docs.derivative.ca/GLSL_TOP">GLSL TOP</a> sous-jacent.
Il utilise donc le langage GLSL puisqu'il hérite de GLSL TOP.
GLSL TOP est une implémentation de GLSL proposée par Touchdesigner dans son propre écosystème, elle s'intègre dans le workflow des TOP (Texture Operators dans la terminologie Touchdesigner).
Pour plus d'informations sur le langage GLSL, rendez-vous sur la page <a href="../GLSL/">GLSL</a>
Pour plus d'informations sur les TOP dans Touchdesigner, rendez-vous <a href="https://derivative.ca/UserGuide/TOP">ici</a></p>
<h3 id="vue-densemble-de-lediteur-de-pixel-wrangle">Vue d'ensemble de l'éditeur de Pixel Wrangle</h3>
<p>L'édition du code dans Pixel-Wrangle se divise en 3 onglets dans l'<a href="./UI.md">fr/UI</a>:</p>
<ul>
<li>L'onglet 'IO' qui contient les panneaux 'Inputs' (vos variables 'uniform') et 'Outputs' (les buffers de sorties du shader). Ces panneaux font l'objet d'une syntaxe spécifique dont le détail complet se trouve ci-après -&gt; <a href="./#les-particularités-de-longlet-io">Les particularités de l'onglet IO</a></li>
<li>L'onglet 'Functions' qui accueille tout le code en dehors de la fonction main(). Vous pouvez y déclarer vos fonctions personnalisées, macros, variables partagées, etc.</li>
<li>L'onglet 'Main' qui correspond au corps de la fonction main(). Vous n'avez donc pas à déclarer cette fonction au sein de votre code mais juste écrire votre code comme vous le feriez dans la fonction main().</li>
</ul>
<iframe style="border: 1px solid rgba(0, 0, 0, 0.1);" width="100%" height="500" src="https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Fproto%2FDZoDzaIA6ZhcCWlU0Gr8RC%2FPixel-Wrangle-UI%3Fnode-id%3D153%253A165%26scaling%3Dscale-down%26page-id%3D153%253A164%26starting-point-node-id%3D153%253A165" allowfullscreen></iframe>

<h3 id="ordre-dexecution">Ordre d'exécution</h3>
<p>Le contenu en code des 3 onglets sont parsés, puis envoyés au compilateur dans l'ordre suivant :</p>
<ol>
<li>Macros</li>
<li>IO -&gt; Inputs (uniform)</li>
<li>Functions -&gt; imports avec #include + déclarations de fonctions</li>
<li>IO -&gt; Outputs (Buffers)</li>
<li>Main (fonction main() avec votre code à l'intérieur)</li>
</ol>
<p>Pour visualiser le code complet (une fois parsé : donc tel qu'il est envoyé au compilateur), vous pouvez consulter le 'Full Code Panel' ([CTRL] + 9)</p>
<h3 id="attention"><strong>Attention</strong></h3>
<ul>
<li>Les onglets 'Functions' et 'Main' utilisent tous deux la syntaxe GLSL standard donc vous pouvez écrire le code exactement comme vous l'écririez dans n'importe quel shader GLSL.</li>
</ul>
<h4 id="mais"><strong>MAIS</strong></h4>
<ul>
<li><strong>L'onglet '<a href="./#les-particularités-de-longlet-io">IO</a>' dispose d'une syntaxe particulière</strong>, expliquée en détail <a href="./#les-particularités-de-longlet-io">ci-après</a></li>
</ul>
<h2 id="les-particularites-de-longlet-io">Les particularités de l'onglet IO</h2>
<h3 id="panneau-des-inputs-variables-uniform"><strong>Panneau des Inputs (variables uniform)</strong></h3>
<h4 id="specificites-de-syntaxe">Spécificités de syntaxe</h4>
<ul>
<li>Chacune des variables que vous déclarez dans le panneau Inputs sont des variables uniforms mappées sur un paramètre de Touchdesigner.</li>
<li><strong>Pas de mot clé 'uniform'</strong>, il est implicite et est ajouté automatiquement au moment du parsing par Pixel Wrangle, avant la compilation.</li>
<li>Le nom de votre <strong>variable uniform reflète le nom du paramètre Touchdesigner associé</strong>.</li>
<li>En conséquence, <strong>le nom de votre variable doit impérativement commencer par une majuscule suivie de minuscules uniquement, et SANS caractères spéciaux ou '_'</strong> (contrainte des noms de paramètres Touchdesigner)</li>
<li>Le type de la variable détermine le type du paramètre Touchdesigner qui y sera associé en suivant le même schéma que les déclarations de vos uniforms dans un GLSL TOP</li>
<li>**Toute ligne de code débutant par '//' ou '/*' est considérée comme un commentaire, SAUF <a href="./#cas-spécifiques-headers">Cas spécifiques</a> (Headers)</li>
<li>**Toute déclaration de variable ou commentaire doit se faire sur une seule et unique ligne.</li>
<li>**Pour personnaliser le paramètre Touchdesigner associé à votre variable uniform, vous pouvez ajouter un commentaire à la suite de la déclaration de votre variable suivi de paires propriété=valeur détaillées <a href="./#les-propriétés-modifiables">ici</a></li>
<li>Les <a href="./#les-propriétés-modifiables">propriétés modifiables</a> reflètent ce que vous pourriez faire via le Component Editor, pas plus.</li>
<li>**Chaque propriété doit être suivie d'un signe '=' puis de sa valeur.</li>
<li>**Chaque couple [propriété=valeur] doit être séparé par un ';'</li>
<li>La liste des propriétés modifiables est consultable ci-dessous, dans la rubrique 'Propriétés modifiables'</li>
<li>Les propriétés dont la valeur est une string ne doivent pas être englobées dans des ' ou des ", mais écrites directement, telles quelles.</li>
<li>Néanmoins les propriétés dont la valeur est un array de string doivent être écrites sous la forme [ 'Menu Entry 1' , 'Menu Entry 2' ]\ avec des ' ou des " englobant chaque élément de l'array.</li>
</ul>
<h4 id="cas-specifiques-headers">Cas spécifiques (Headers)</h4>
<ul>
<li>Les paramètres de type Header sont disponibles bien qu'ils n'aient pas de sens au niveau de GLSL, car ils sont utiles pour la mise en forme de l'UI.</li>
<li>La syntaxe pour créer un paramètre de type Header est '//--- '.</li>
<li>Vous pouvez ensuite lui associer une propriété label et/ou section.</li>
</ul>
<p>Par exemple : '//--- label=Noise Types; section=1' créera un paramètre d'UI de type Header, avec pour titre : 'Noise Types', et disposera d'un séparateur au dessus.</p>
<ul>
<li>Les autres paramètres non compatibles en tant que 'uniform' avec GLSL TOP comme les types 'File' ou 'Folder' ne sont pas disponibles via le panneau IO.</li>
</ul>
<h4 id="correspondance-des-types-glsl-style-de-parametres-td">Correspondance des Types GLSL / Style de paramètres TD</h4>
<table>
<thead>
<tr>
<th><strong>GLSL Type</strong></th>
<th><strong>TD Parameter Style</strong></th>
<th><strong>Syntax</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>int</td>
<td>Int OR Menu OR Toggle OR Pulse</td>
<td>int Newint;</td>
</tr>
<tr>
<td>float</td>
<td>Float</td>
<td>float Newfloat;</td>
</tr>
<tr>
<td>vec[2-4]</td>
<td>Float of size [2-4] OR Color for vec[3-4]</td>
<td>vec3 Newcolor;</td>
</tr>
<tr>
<td>uvec[2-4]</td>
<td>Int of size [2-4] OR Color for vec[3-4]</td>
<td>uvec2 Newunsignedvec;</td>
</tr>
<tr>
<td>ivec[2-4]</td>
<td>Int of size [2-4] OR Color for vec[3-4]</td>
<td>ivec2 Newsignedvec;</td>
</tr>
<tr>
<td>bvec[2-4]</td>
<td>Int of size [2-4] OR Color for vec[3-4]</td>
<td>bvec2 Newboolvec;</td>
</tr>
<tr>
<td>\&lt;TYPE>[*]</td>
<td>CHOP</td>
<td>vec4 Newvectorarray[16] =&gt; !! Array of 16 vec4 values, needs to be referenced by a CHOP that holds the corresponding channels !!</td>
</tr>
<tr>
<td>mat4</td>
<td>CHOP</td>
<td>mat4 Newmatrix;</td>
</tr>
<tr>
<td>atomic_uint</td>
<td>Int</td>
<td>atomic_uint Newatomicint;</td>
</tr>
<tr>
<td>const int</td>
<td>Int OR Menu OR Toggle OR Pulse</td>
<td>const int Newconstantint = 0;</td>
</tr>
</tbody>
</table>
<h4 id="les-proprietes-modifiables">Les propriétés modifiables</h4>
<table>
<thead>
<tr>
<th><strong>Syntax</strong></th>
<th><strong>Description</strong></th>
<th><strong>Default Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>label</td>
<td>Parameter Label</td>
<td>Parameter Name</td>
</tr>
<tr>
<td>section</td>
<td>Parameter has separator</td>
<td>0</td>
</tr>
<tr>
<td>order</td>
<td>Parameter UI order (position)</td>
<td>integer =&gt; Same as your declaration order</td>
</tr>
<tr>
<td>readonly</td>
<td>Parameter Lock</td>
<td>0</td>
</tr>
<tr>
<td>enable</td>
<td>Parameter Activation</td>
<td>1</td>
</tr>
<tr>
<td>enableExpr</td>
<td>Parameter Activation Expression</td>
<td>''</td>
</tr>
<tr>
<td>help</td>
<td>Parameter Help text on hover</td>
<td>''</td>
</tr>
<tr>
<td>style</td>
<td>Parameter Style</td>
<td>Float or Color (for vec3-4) or Str or CHOP (according to variable type). Can be modified for int, float, vec3-4 (Valid values =&gt; Menu, Color, Toggle, Pulse, Float, Int)</td>
</tr>
<tr>
<td>expr</td>
<td>Parameter Expression</td>
<td>''</td>
</tr>
<tr>
<td>bindExpr</td>
<td>Parameter Bind Expression</td>
<td>''</td>
</tr>
<tr>
<td>menu</td>
<td>Parameter Menu entries (integer type only)</td>
<td>''</td>
</tr>
<tr>
<td>default</td>
<td>Parameter Default Value</td>
<td>0 or ''</td>
</tr>
<tr>
<td>min</td>
<td>Minimum Parameter Value</td>
<td>0</td>
</tr>
<tr>
<td>max</td>
<td>Maximum Parameter Value</td>
<td>1</td>
</tr>
<tr>
<td>toggle</td>
<td>Parameter is a toggle (integer type only)</td>
<td>''</td>
</tr>
<tr>
<td>pulse</td>
<td>Parameter is a Pulse (integer type only)</td>
<td>''</td>
</tr>
<tr>
<td>chop</td>
<td>Parameter chop path (mat4 type only)</td>
<td>''</td>
</tr>
</tbody>
</table>
<h4 id="exemples">Exemples</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="cm">/* Syntax example */</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1">// Single line comments are ignored by the parser</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1">// Except for header (when line start with //---)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1">//--- label=Simple Parameters; section=1</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="c1">// Create Float Parameter</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="kt">float</span><span class="w"> </span><span class="n">Float</span><span class="p">;</span><span class="w"> </span><span class="c1">// default=0; min=-1; max=1; section=1</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="c1">// Create Integer Parameter</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="kt">int</span><span class="w"> </span><span class="n">Int</span><span class="p">;</span><span class="w">     </span><span class="c1">// min=-10; max=10; default=0</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="c1">//--- label=Vector Parameters; section=1</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="c1">// Create Color Vector Parameter</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="kt">vec3</span><span class="w"> </span><span class="n">Color</span><span class="p">;</span><span class="w">  </span><span class="c1">// default=[0, 0.7, 1]; section=1</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="c1">// Create Vector style Parameter</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="kt">vec3</span><span class="w"> </span><span class="n">Position</span><span class="p">;</span><span class="w">  </span><span class="c1">// default=[0, 0.7, 1]; style=Float</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="c1">//--- label=Menu Parameters; section=1</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="c1">// Create Menu Parameter</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="kt">int</span><span class="w"> </span><span class="n">Newmenu</span><span class="p">;</span><span class="w">                  </span><span class="c1">// menu=[&#39;Tomatoes&#39;, &#39;Bananas&#39;]; default=1; section=1</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="c1">//--- label=Array Parameters; section=1</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="c1">//// Create a uniform array of vec2 (you will need to specify a CHOP target with 2 channels and 16 samples each)</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="c1">// vec2 Array[16];  </span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="c1">//// Create a texture buffer array of vec4 (you will need to specify a CHOP target with 4 channels and 200 samples each)</span>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="c1">// vec4 Array[200]; </span>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a><span class="c1">//// Create Matrix Parameter (you will need to specify a compatible &#39;chop&#39; like transformCHOP to remove warning)</span>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a><span class="c1">// mat4 NewMatrix;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a><span class="cm">/* Vulkan Specialization Constants */</span>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ConstanttypeMenu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mo">0</span><span class="p">;</span><span class="w">     </span><span class="c1">// menu=[&#39;Candies&#39;, &#39;Sky&#39;]; label=Vulkan Constant Menu</span>
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a><span class="c1">//--- label=Atomic Counters; section=1</span>
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a><span class="c1">// Create Atomic Counter</span>
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a><span class="kt">atomic_uint</span><span class="w"> </span><span class="n">NewAtomicCounter</span><span class="p">;</span><span class="w"> </span><span class="c1">// section=1</span>
</code></pre></div>
<h3 id="panneau-des-outputs-buffers"><strong>Panneau des Outputs (Buffers)</strong></h3>
<h4 id="generalites-au-sein-de-glsl-top">Généralités au sein de GLSL TOP</h4>
<p>Les buffers sont des variables qui permettent de stocker et de partager des données entre différents shaders ou différentes étapes de rendu. Ils sont utiles pour l'accumulation de données et la communication entre les différents shaders d'un pipeline de rendu.</p>
<p>Voici les 2 formes les plus utilisées au sein du GLSL TOP de Touchdesigner :</p>
<ul>
<li>
<p>Les buffers de textures (<strong>Accessible en mode Vertex/Pixel ET Compute</strong>): Ils permettent de référencer des textures qui seront utilisées pour l'affichage. Ils sont généralement utilisés dans les shaders pour <strong>LIRE</strong> des pixels de texture et les utiliser pour influencer la couleur finale du pixel.</p>
</li>
<li>
<p>Les buffer d'images (<strong>Accessible en mode Compute UNIQUEMENT</strong>) : Ils permettent de <strong>LIRE ET ÉCRIRE</strong> dans des tampons de données d'images tels que des textures ou des rendus offscreen. Ils sont généralement utilisés dans les shaders pour effectuer des opérations de traitement de l'image.</p>
</li>
</ul>
<p>Il est également possible de déclarer des buffers de textures d'images avec des dimensions supérieures à 2 (par exemple, une texture 3D ou une image 3D).</p>
<p>Il est important de noter que les buffers de texture et d'image ne peuvent pas être utilisés de manière interchangeable.
Chacun a sa propre syntaxe et ses propres fonctions d'accès.</p>
<p>Également, il est à noter que les buffers d'image peuvent être accessibles en écriture et en lecture mais seulement en mode 'Compute Shader', se référer à la page GLSL des paramètres de Pixel Wrangle ou d'un GLSL TOP afin de régler cette option (Output Access).</p>
<p>Concernant <strong>les buffers de texture</strong> : ils <strong>sont accessibles en lecture UNIQUEMENT mais disponible dans les 2 modes</strong> (Vertex/Pixel ET Compute)** avec la fonction texture().</p>
<p>Par ailleurs, au sein d'un Pixel Shader <strong>en mode 'Compute', l'utilisation de texelFetch() est plus appropriée</strong> pour lire les données de texture car elle offre globalement de meilleures performances tout en permettant la gestion des niveaux de mipmap(ou LOD =&gt; Level Of Detail).</p>
<h4 id="exemples-dans-un-glsl-top">Exemples dans un GLSL TOP</h4>
<p><strong>En mode Vertex/Pixel :</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="w"> </span><span class="c1">// Déclarer un buffer en mode Pixel/Vertex </span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w"> </span><span class="k">layout</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mo">0</span><span class="p">)</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">fragColor</span><span class="p">;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w"> </span><span class="k">layout</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">otherColor</span><span class="p">;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w"> </span><span class="k">layout</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">extraInfo</span><span class="p">;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">(){</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w"> </span><span class="cm">/* Assigner une valeur à un buffer */</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w"> </span><span class="c1">// Ecrire la couleur rouge dans le buffer &#39;fragColor&#39;</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w"> </span><span class="n">fragColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mo">0</span><span class="p">,</span><span class="mo">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// Buffer 0 = Rouge</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w"> </span><span class="c1">// Ecrire la couleur de la première entrée 2D, échantillonnée avec les coordonnées normalisées vUV.st fournies par Touchdesigner.</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w"> </span><span class="n">otherColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">texture</span><span class="p">(</span><span class="n">sTD2DInputs</span><span class="p">[</span><span class="mo">0</span><span class="p">],</span><span class="w"> </span><span class="n">vUV</span><span class="p">.</span><span class="n">st</span><span class="p">);</span><span class="w"> </span><span class="c1">// Buffer 1 = Texture de la première entrée</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w"> </span><span class="c1">// Ecrire la couleur bleu dans le buffer &#39;fragColor&#39;</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w"> </span><span class="n">extraInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="mo">0</span><span class="p">,</span><span class="mo">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// Buffer 2 = Bleu</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="p">}</span>
</code></pre></div>
<p><strong>En mode Compute:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="cm">/* </span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="cm">Les Compute Shaders n&#39;ont pas d&#39;opinion sur le type de données que vous leur fournissez, ni sur la manière de répartir le calcul sur le GPU. </span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="cm">Ces aspects offrent une grande flexibilité mais nécessitent de déterminer en amont la façon dont vous souhaitez que les calculs s&#39;effectuent sur votre carte graphique. </span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="cm">Pour plus d&#39;informations à ce sujet, vous pouvez vous référer à la documentation officielle de GLSL.</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="cm">Pour une explication brève du concept et son implémentation au sein de TD, rendez-vous sur https://docs.derivative.ca/Compute_Shader et https://docs.derivative.ca/Write_a_GLSL_TOP</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="cm">*/</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w"> </span><span class="c1">// Déclarer la taille des groupes de thread</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="k">layout</span><span class="w"> </span><span class="p">(</span><span class="n">local_size_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">local_size_y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="p">;</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="cm">/*</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="cm">La taille de groupe est utilisée pour déterminer comment les données de texture sont partitionnées et distribuées aux threads de votre GPU. </span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="cm">Par exemple, si vous utilisez une texture de 512 x 512 pixels et une taille de groupe de 8 x 8, vous aurez besoin de 64 groupes de threads pour couvrir la totalité de la texture.</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="cm">Si vous laissez le paramètre Auto-dispatch sur ON dans les paramètres de la page GLSL, GLSL TOP assignera automatiquement le nombre de groupe nécessaires afin de couvrir l&#39;intégralité de la résolution choisie, donc ici : 64. (512/8 pour chaque dimension).</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="cm">Dans le cas contraire, vous devrez définir manuellement le nombre de groupe de threads via le paramètre Dispatch Size.</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="cm">*/</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">(){</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w"> </span><span class="c1">// Définir la couleur </span>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mo">0</span><span class="p">,</span><span class="mo">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// Buffer 0 = Rouge</span>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w"> </span><span class="c1">// Ecrire la couleur rouge dans le buffer 0</span>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w"> </span><span class="n">imageStore</span><span class="p">(</span><span class="n">mTDComputeOutputs</span><span class="p">[</span><span class="mo">0</span><span class="p">],</span><span class="w"> </span><span class="kt">ivec2</span><span class="p">(</span><span class="nb">gl_GlobalInvocationID</span><span class="p">.</span><span class="n">xy</span><span class="p">),</span><span class="w"> </span><span class="n">color</span><span class="p">);</span>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="p">}</span>
</code></pre></div>
<h4 id="gestion-des-buffers-avec-pixel-wrangle">Gestion des buffers avec Pixel Wrangle</h4>
<ul>
<li>Déclarez vos buffers directement dans le panneau 'Outputs' de l'onglet 'IO', toujours de la même manière, que vous soyez en mode <strong>Vertex/Pixel</strong> ou en mode <strong>Compute</strong>. De manière générale (bien qu'il n'y aie pas de règle absolue), je vous conseille d'utiliser des noms en CAPITALES afin de bien différencier vos buffers de sortie de vos Inputs. Ci-dessous un exemple de déclaration de 3 buffers de sortie</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kt">vec4</span><span class="w"> </span><span class="n">IMAGE</span><span class="p">;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="kt">vec4</span><span class="w"> </span><span class="n">POSITION</span><span class="p">;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="kt">vec4</span><span class="w"> </span><span class="n">NORMALS</span><span class="p">;</span>
</code></pre></div>
<ul>
<li>
<p>Pixel Wrangle crée immédiatement les sorties nécessaires avec leurs noms respectifs, vous les verrez apparaître sur l'instance de l'OP en tant que sorties de type TOP.</p>
</li>
<li>
<p>Dans le même temps, un onglet correspondant à chacune de vos déclarations sera visible dans les panneaux 'Viewer'</p>
</li>
<li>
<p>Les sorties sont mappées dans l'ordre où elles ont été déclarées. Si vous souhaitez modifier cet ordre, vous pouvez changer l'ordre de vos déclarations.</p>
</li>
<li>
<p>Par défaut, chacune de ces déclarations ajoute dynamiquement une macro correspondante pour y accéder facilement dans les Compute Shaders. Pour reprendre l'exemple précédent, voici ce que cela donne dans le code envoyé au compilateur :</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="cp">#define IMAGE mTDComputeOutputs[0]</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="cp">#define POSITION mTDComputeOutputs[1]</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="cp">#define NORMALS mTDComputeOutputs[2]</span>
</code></pre></div>
<ul>
<li>Ensuite, vous pouvez donc écrire dans ces buffers de la manière suivante depuis l'onglet 'Main' :</li>
</ul>
<h5 id="en-mode-vertexpixel"><strong>En mode Vertex/Pixel</strong></h5>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="cm">/* Read Position-Normalized-Centered-Ratio from macro and store it in a vec4 called &#39;c&#39; */</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="c1">// _PNCR is a Shorthand for Position-Normalized-Centered-RatioAlongMaxAxis</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="kt">vec4</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="n">_PNCR</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="cm">/* Write vec4 &#39;c&#39; in &#39;IMAGE&#39; Buffer, td() is a shorthand for TDOutputSwizzle() */</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="n">IMAGE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">td</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="cm">/* </span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="cm">Pour en savoir plus sur les macros utilisées ci-dessus, vous pouvez vous rendre sur la page [Macros](./Macros.md), vous y trouverez une liste complète des macros utilisables dans Pixel Wrangle.</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="cm">Elles sont également consultables depuis le panneau &#39;Macros&#39; en haut à gauche dans l&#39;interface, ou directement depuis le panneau &#39;Full Code&#39; telles qu&#39;elles sont envoyées au compilateur.</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="cm">*/</span>
</code></pre></div>
<h5 id="en-mode-compute"><strong>En mode Compute</strong></h5>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="cm">/* Read Position-Normalized-Centered-Ratio from macro and store it in a vec4 called &#39;c&#39; */</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1">// _PNCR is a Shortcut for Position-Normalized-Centered-RatioAlongMaxAxis</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="kt">vec4</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="n">_PNCR</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="cm">/* Write vec4 &#39;c&#39; in &#39;IMAGE&#39; Buffer using Absolute Coordinates */</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="c1">// Shortcut for imageStore(mTDComputeOutputs[0], ivec2(gl_GlobalInvocationID.xy), TDOutputSwizzle(c))</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="n">store</span><span class="p">(</span><span class="n">IMAGE</span><span class="p">,</span><span class="w"> </span><span class="n">_UV</span><span class="p">,</span><span class="w"> </span><span class="n">td</span><span class="p">(</span><span class="n">c</span><span class="p">));</span>
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.instant"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.51d95adb.min.js"></script>
      
    
  </body>
</html>